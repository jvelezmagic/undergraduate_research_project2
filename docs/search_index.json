[["index.html", "Bacterial filamentation: a bet for survival in stressful environments Welcome Abstract Acknowledgments", " Bacterial filamentation: a bet for survival in stressful environments Jesús Vélez Santiago Abstract This R Markdown template is for writing an Oxford University thesis. The template is built using Yihui Xie’s bookdown package, with heavy inspiration from Chester Ismay’s thesisdown and the OxThesis template (most recently adapted by John McManigle). This template’s sample content include illustrations of how to write a thesis in R Markdown, and largely follows the structure from this R Markdown workshop. Congratulations for taking a step further into the lands of open, reproducible science by writing your thesis using a tool that allows you to transparently include tables and dynamically generated plots directly from the underlying data. Hip hooray! Welcome Welcome to the bs4 output from the oxforddown thesis template for R Markdown. To view/download the PDF output, click here (or click the cover image). Enjoy! Ulrik Lyngs 4 January 2021 Abstract This R Markdown template is for writing an Oxford University thesis. The template is built using Yihui Xie’s bookdown package, with heavy inspiration from Chester Ismay’s thesisdown and the OxThesis template (most recently adapted by John McManigle). This template’s sample content include illustrations of how to write a thesis in R Markdown, and largely follows the structure from this R Markdown workshop. Congratulations for taking a step further into the lands of open, reproducible science by writing your thesis using a tool that allows you to transparently include tables and dynamically generated plots directly from the underlying data. Hip hooray! Acknowledgments This is where you will normally thank your advisor, colleagues, family and friends, as well as funding and institutional support. In our case, we will give our praises to the people who developed the ideas and tools that allow us to push open science a little step forward by writing plain-text, transparent, and reproducible theses in R Markdown. We must be grateful to John Gruber for inventing the original version of Markdown, to John MacFarlane for creating Pandoc (http://pandoc.org) which converts Markdown to a large number of output formats, and to Yihui Xie for creating knitr which introduced R Markdown as a way of embedding code in Markdown documents, and bookdown which added tools for technical and longer-form writing. Special thanks to Chester Ismay, who created the thesisdown package that helped many a PhD student write their theses in R Markdown. And a very special thanks to John McManigle, whose adaption of Sam Evans’ adaptation of Keith Gillow’s original maths template for writing an Oxford University DPhil thesis in LaTeX provided the template that I in turn adapted for R Markdown. Finally, profuse thanks to JJ Allaire, the founder and CEO of RStudio, and Hadley Wickham, the mastermind of the tidyverse without whom we’d all just given up and done data science in Python instead. Thanks for making data science easier, more accessible, and more fun for us all. "],["introduction.html", "Introduction Why use it? Who should use it?", " Introduction Welcome to oxforddown (Lyngs 2019), a thesis template for R Markdown that I created when writing my own PhD thesis at the University of Oxford. This template allows you to write in R Markdown, while formatting the PDF output with the beautiful and time-tested OxThesis LaTeX template. The sample content is partly adapted from thesisdown . Hopefully, writing your thesis in R Markdown will provide a nicer interface to the OxThesis template if you haven’t used TeX or LaTeX before. More importantly, R Markdown allows you to embed chunks of code within your thesis and generate plots and tables directly from the underlying data, avoiding copy-paste steps. This gets you into the habit of doing reproducible research, which will benefit you long-term as a researcher, and also help anyone that is trying to reproduce or build upon your results down the road. Why use it? R Markdown creates a simple and straightforward way to interface with the beauty of LaTeX. Packages have been written in R to work directly with LaTeX to produce nicely formatting tables and paragraphs. In addition to creating a user friendly interface to LaTeX, R Markdown allows you to read in your data, analyze it and to visualize it using R, Python or other languages, and provide documentation and commentary on the results of your project. Further, it allows for results of code output to be passed inline to the commentary of your results. You’ll see more on this later, focusing on R. If you are more into Python or something else, you can still use R Markdown - see ‘Other language engines’ in Yihui Xie’s R Markdown: The Definitive Guide. Using LaTeX together with Markdown is more consistent than the output of a word processor, much less prone to corruption or crashing, and the resulting file is smaller than a Word file. While you may never have had problems using Word in the past, your thesis is likely going to be about twice as large and complex as anything you’ve written before, taxing Word’s capabilities. Who should use it? Anyone who needs to use data analysis, math, tables, a lot of figures, complex cross-references, or who just cares about reproducibility in research can benefit from using R Markdown. If you are working in ‘softer’ fields, the user-friendly nature of the Markdown syntax and its ability to keep track of and easily include figures, automatically generate a table of contents, index, references, table of figures, etc. should still make it of great benefit to your thesis project. References "],["how-to-use.html", "1 How to use 1.1 How oxforddown is structured 1.2 Building your entire thesis 1.3 Building a single chapter", " 1 How to use 1.1 How oxforddown is structured . +-- index.Rmd +-- _bookdown.yml +-- 00-introduction.Rmd | ... +-- 07-conclusion.Rmd +-- front-and-back-matter | +-- _abstract.Rmd | +-- 98-appendices.Rmd | ... +-- bibliography | +-- references.bib | ... +-- figures | ... +-- docs | +-- _main.pdf | ... +-- scripts_and_filters | +-- knit-functions.R | ... +-- templates | +-- template.tex | ... 1.1.1 index.Rmd: metadata and layout options In index.Rmd, set your thesis’ basic metadata (e.g., title, author name) title: | `oxforddown`: \\ An Oxford University Thesis \\ Template for R Markdown author: Author Name college: Your College Also set filepath(s) to your abstract, acknowledgements, abbreviations, and bibliography (one or more .bib files): abstract: | `r paste(readLines(&quot;front-and-back-matter/_abstract.Rmd&quot;), collapse = &#39;\\n &#39;)` acknowledgements: | `r paste(readLines(&quot;front-and-back-matter/_acknowledgements.Rmd&quot;), collapse = &#39;\\n &#39;)` dedication: For Yihui Xie abbreviations: | `r paste(readLines(&quot;front-and-back-matter/_abbreviations.Rmd&quot;), collapse = &#39;\\n &#39;)` ####################### ## bibliography path ## ####################### bibliography: [bibliography/references.bib, bibliography/additional-references.bib] Finally, index.Rmd is also where you customise layout options. For example, in PDF output what should the heading for the bibliography section say? How should page numbers be positioned? Should line numbers be shown? In HTML output, what CSS files should be used for styling? ### citation and bibliography style ### bibliography-heading-in-pdf: Works Cited ... ### position of page numbers ### ordinary-page-number-foot-or-head: foot #&#39;foot&#39; puts page number in footer, &#39;head&#39; in header ordinary-page-number-position: C ... includeline-num: false #show line numbering in PDF? ... bookdown::bs4_book: css: - templates/bs4_style.css - templates/corrections.css # remove to stop highlighting corrections 1.1.2 other .Rmd files in root folder: thesis chapters each chapter of your thesis should have its own .Rmd file in the root directory when you knit index.Rmd, these chapters are merged together in alphabetical order, based on their filenames 1.1.3 front-and-back-matter/ this folder holds the front and back matter of your thesis it has .Rmd files for your abstract, acknowledgements, abbreviations, and a welcome note that is included in HTML output. Note how these files start with an underscore (e.g. _abstract.Rmd). This means they will not automatically be merged into the thesis – they are explicitly included in index.Rmd 98-appendices and 99-references.Rmd are automatically merged into thesis, however - therefore their file names start with a high number, so that they will be included by the very end (merging is done alphabetically) 99-references.Rmd sole purpose is to set the heading for the references section in HTML and Word output 1.1.4 _bookdown.yml: build options Set output directory for your thesis files (docs/ is the default, as it makes it easy to publish HTML output on GitHub pages) Should R Markdown automatically merge .Rmd files in alphabetical order? Alternatively, specify explicitly which files should be included. 1.1.5 scripts-and-filters knit-function.R has the functions that are used when you build the entire thesis by knitting index.Rmd create_chunk_options.R lets you include cute quotes at the start of a chapter in PDF output colour_and_highlight.lua lets you color text or apply background color to text 1.1.6 templates template.tex is the LaTeX template used to build the entire thesis to PDF in the OxThesis layout (relies on ociamthesis.cls) brief-template.tex is the LaTeX template used to build a single chapter to PDF in the OxThesis layout (relies on ociamthesis.cls) beltcrest.pdf: the oxford logo used on the front page of the PDF output 1.2 Building your entire thesis Build the entire thesis by opening index.Rmd and clicking the ‘knit’ button. The generated thesis files are saved in the docs/ folder To choose output formats, go to the top of index.Rmd’s YAML header and edit the line thesis_formats &lt;- \"pdf\"; to the format(s) you want (options are “pdf,” “bs4,” “gitbook,” and “word”) You can build to multiple formats simultaneously with, e.g., thesis_formats &lt;- c(\"pdf\", \"bs4\", \"word\") If you want to customise the build function, edit scripts_and_filters/knit-functions.R 1.2.0.1 PDF output knit: (function(input, ...) { thesis_formats &lt;- &quot;pdf&quot;; ... When you build the entire thesis to PDF, Latex generates a whole bunch of auxillary files - these are automatically removed after the build process end by the custom knit function that is used when you knit index.Rmd. To change how this removal is done, edit scripts_and_filters/knit-functions.R. The line file.remove(list.files(pattern = \"*\\\\.(log|mtc\\\\d*|maf|aux|bcf|lof|lot|out|toc)$\")) within if (\"pdf\" %in% output_format){ is the one that removes files after PDF output is generated. 1.2.0.2 BS4 book output (HTML) knit: (function(input, ...) { thesis_formats &lt;- &quot;bs4&quot;; ... NOTE: the bs4 book output requires the downlit and bslib R packages (install them with install.packages) Note also that to deploy a BS4 book on GitHub Pages, there must be a .nojekyll file in the docs/ folder, otherwise GitHub does some voodoo that causes some filepaths not to work. This file is generated automatically by oxforddowns knitting function. 1.2.0.3 Gitbook output (HTML) knit: (function(input, ...) { thesis_formats &lt;- &quot;gitbook&quot;; ... Note that to deploy a gitbook on GitHub Pages, there must be a .nojekyll file in the docs/ folder, otherwise GitHub does some voodoo that causes some filepaths not to work. This file is generated automatically by oxforddowns knitting function. 1.2.0.4 Word output knit: (function(input, ...) { thesis_formats &lt;- &quot;word&quot;; ... Note that the Word output has no templates behind it, and many things do not work (e.g. image rotation, highlighting corrections). I encourage pull requests that optimise the Word output, e.g. by using tools from the officer package. 1.3 Building a single chapter To knit an individual chapter without compiling the entire thesis you: open the .Rmd file of a chapter add a YAML header specifying the output format(s) (e.g. bookdown::word_document2 for a word document you might want to upload to Google Docs for feedback from collaborators) click the knit button (the output file is then saved in the root folder) As shown in the sample chapters’ YAML headers, to output a single chapter to PDF, use e.g.: output: bookdown::pdf_document2: template: templates/brief_template.tex citation_package: biblatex documentclass: book bibliography: references.bib The file templates/brief_template.tex formats the chapter in the OxThesis style but without including the front matter (table of contents, abstract, etc). "],["rmd-basics.html", "2 Models to the rescue; filamentation abstraction 2.1 Introduction 2.2 Filamentation model 2.3 Results 2.4 Discussion", " 2 Models to the rescue; filamentation abstraction Scientists have extensively studied the mechanisms that orchestrate the growth and division of bacterial cells. Cells adapt their shape and dimensions in response to variations in the intracellular and extracellular environments by integrating information about the presence of nutrients or harmful agents in the decision to grow or divide. Filamentation is a process that occurs when rod-shaped cells stop dividing but continue to grow, thus producing elongated cells. Some cells can naturally grow as filamentous, while others only do so under stressful conditions. Here we use mathematical modeling and computational simulations to evaluate a toxic agent’s intracellular concentration as a function of cell length. We show that filamentation can act as a strategy that promotes the resilience of a bacterial population under stressful environmental conditions. 2.1 Introduction By integrating information from the environment, cells can alter their cell cycle. For instance, some cells arrest the cell division in the presence of toxic agents but continue to grow. Previous studies have shown that this filamentation phenomenon provides a mechanism that enables cells to cope with stress, which leads to an increase in the probability of survival [1]. For example, filamentation can be a process capable of subverting innate defenses during urinary tract infection, facilitating the transition of additional rounds of intracellular bacterial community formation [2]. Although filament growth can help mitigate environmental stress (e.g., by activating the SOS response system [1]), the evolutionary benefits of producing elongated cells that do not divide are unclear. Here, we proposed a mathematical model based on ordinary differential equations that explicitly considers the concentration of intracellular toxin as a function of the cell’s length (see Equation (2.1)). The model is built based on the growth ratio of measurements of the surface area (SA) and the cell volume (V), whereby the uptake rate of the toxin depends on the SA. However, V’s rate of change for SA is higher than SA for V, which results in a transient reduction in the intracellular toxin concentration (see Figure 2.1). Therefore, we hypothesized that this geometric interpretation of filamentation represents a biophysical defense line to increase the probability of a bacterial population’s survival in response to stressful environments. Figure 2.1: Do something coooooool 2.2 Filamentation model Let us assume the shape of cells is a cylinder with hemispherical ends. Based on this geometric structure, a nonlinear system of differential equations governing filamentation can be written as follows: \\[\\begin{equation} \\begin{split} \\frac{dT_{int}}{dt} &amp;= T_{sa} \\cdot (T_{ext}(t) - T_{vol}) - \\alpha \\cdot T_{ant} \\cdot T_{int} \\\\ \\frac{dL}{dt} &amp;= \\begin{cases} \\beta \\cdot L,&amp; \\text{if } T_{int} \\geq T_{sos}, t \\geq \\tau_{sos} + \\tau_{delay} \\text{ and } L &lt; L_{max} \\\\ 0, &amp; \\text{otherwise} \\end{cases} \\end{split} \\tag{2.1} \\end{equation}\\] It considers the internal toxin (\\(T_{int}\\)) and the cell length (\\(L\\)) as variables. \\(T_{sa}\\) and \\(T_{vol}\\) represent the surface area and volume of the toxin in the cell, respectively. \\(T_{ext}(t)\\) is a function that returns the amount of toxin in the cell medium. \\(T_{anti}\\) and \\(\\alpha\\) symbolize the amount of antitoxin and its efficiency rate, respectively. \\(\\beta\\) as the rate of filamentation. \\(L_{max}\\) is the maximum size that the cell can reach when filamentation is on. \\(T_{sos}\\) and \\(T_{kill}\\) are thresholds for filamentation and death, respectively. Finally, \\(\\tau_{delay}\\) is the amount of time required to activate filamentation after reaching the \\(T_{sos}\\) threshold. 2.3 Results 2.3.1 Filamentation provides transient resistance under stressful conditions When growing rod-shaped bacterial cells under constant conditions, the distribution of lengths and radii is narrow [3]. However, when growing under stress conditions, some cells produce filaments [4]. This phenomenon may depend on the SOS response system [5], which can repair DNA damage, giving the cell greater chances of recovering and surviving under stress conditions. Besides, the SOS response has been reported to have precise temporal coordination in individual bacteria [6]. Among the stress conditions that can trigger the SOS response is exposure to beta-lactam antibiotics [7]. In general, filamentation has been studied as an unavoidable consequence of stress. However, we considered filamentation an active process that produces the first line of defense against toxic agents. Therefore, a differential equation model was proposed that assesses the change in the amount of internal toxin as a function of cell length. At the core of this model, we include the intrinsic relationship between the surface area and the capsule volume since it is vital in determining cell size [8]. Figure 1 Cells growth in a ramp-shaped external toxin signal without considering a toxin-antitoxin system. As time progresses, the toxin in the external environment increases, so the cell raises its internal toxin levels. At approximately time 22, any cell reaches \\(T_{sos}\\). The control cell (unable to filament) and the average cell (capable of filamenting) reach the death threshold, \\(T_{kill}\\), at times 31 and 93 (hatched and solid black lines), respectively. Therefore, under this example, the cell has increased its life span three times more than in control by growing as a filament (green shaded area versus orange shaded area). In turn, Figure 1 also shows stochastic simulations of the system in the intake of internal toxins. Considering that cell growth and death processes are inherently stochastic, stochastic simulations would be a better approximation. However, from now on, we will continue with the study of the deterministic model. 2.3.2 Filamentation increases the minimum inhibitory concentration Antimicrobial resistance (AMR) can be considered one of the most critical health problems of the century. That is, microorganisms’ ability to grow despite exposure to substances designed to inhibit their growth or kill them. In April 2014, the World Health Organization (WHO) published its first global report on AMR surveillance [9]. Taking out of the darkness a common fear, a possible post-antibiotic future in which common infections or minor injuries can kill. Therefore, understanding the mechanisms of avoiding antibiotic action is essential for producing knowledge and developing strategies that reduce the generation of resistant bacteria. A classic experiment in laboratories finds the concentration that inhibits bacterial growth through exposure to different toxin doses. The concentration found is known as the minimum inhibitory concentration (MIC) [10]. Bacteria are capable of modifying their MIC through various mechanisms, for example, mutations [11], impaired membrane permeability [12], flux pumps [13], toxin-inactivating enzymes [14], and plasticity phenotypic [1]. The latter is our phenomenon of interest because it considers the change in shape and size, allowing us to study it as a strategy to promote bacterial survival. We decided to analyze the MIC change caused by filamentation through stable exposure experiments of different toxin amounts at other exposure times. Computational simulations show that when comparing cells unable to filament with those that can, there is an increase in the capacity to tolerate more generous amounts of toxin, increasing their MIC (see Figure 2). Therefore, it confers a gradual increase in resistance beyond filamentation’s role in improving the cell’s life span as the exposure time is longer. 2.3.3 Heterogeneity in the toxin-antitoxin system represents a double-edged sword in survival probability One of the SOS response system properties is that it presents synchronous activation times within homogeneous populations [6]. It has constant gene expression rates that help it cope with stress; however, it is possible to introduce variability by considering having multicopy resistance plasmids [15]. Therefore, the response times would have an asynchronous behavior at the global level but synchronous at the local level. To include this observation into the model, we include a negative term to the internal toxin representing a toxin-antitoxin system. Therefore, the model now has an efficiency rate of the antitoxin and a stable amount per cell. We simulate the effect of the toxin-antitoxin system variation within a \\(1000\\) cell population; we initialize each one with similar initial conditions, except for the amount of internal antitoxin, defined as \\(T_{anti} \\sim N(\\mu, \\sigma)\\). Considering that \\(T_{anti}\\) values \\(&lt; 0\\) are equal to \\(0\\). For each experiment,\\(\\mu = 25\\), while it was evaluated in the range \\([0-20]\\). For the generation of pseudo-random numbers and to ensure the results’ reproducibility, the number \\(42\\) was considered seed. As shown in Figure 3, when we compare heterogeneous populations in their toxin-antitoxin system, we can achieve different population dynamics, that is, changes in the final proportions of cell states; normal, stressed, and dead. This difference is because the cell sometimes has more or less antitoxin to handle the incoming stress situation. Considering that the toxin-antitoxin system’s variability can modify the proportions of final cell states, a question arose about heterogeneity levels’ global behavior. To answer this question, we evaluate the probability of survival for each population, defined by its distribution of antitoxin levels. In this way, we characterized the population survival probability function into three essential points according to its effect: negative, invariant, and positive (see Figure 4). Furthermore, these points are relative to the homogeneous population’s death time in question (\\(\\tau_{kill}\\)): when \\(t &lt; \\tau_{kill}\\) will represent a detrimental effect on survival, \\(t = \\tau_{kill}\\) will be independent of variability, and \\(t &gt; \\tau_{kill}\\) will be a beneficial point for survival. Therefore, we concluded that the effect of heterogeneity in a toxin-antitoxin system represents a double-edged sword. 2.4 Discussion Today, there have been advancements in the number of techniques that have allowed it to extend quantitative analyses to individual cells’ dynamic observations [16-20]. Therefore, studying their cellular behavior every day from medium to medium can be somewhat reproducible, facilitating the association of complex biological functions in simple mathematical equations [21]. Here, we proposed a mathematical model showing that filamentation could serve as a population’s resilience mechanism to stress conditions. Finding that filamentation’s net effect generates an additional window of time for the cell to survive, decreasing the toxin’s intracellular concentration. However, we also found that a side effect of filamentation is to increase the cell’s minimum inhibitory concentration. On the other hand, when we introduce variability in the amount of antitoxin in a cell population, we found that heterogeneity can be a double-edged sword, sometimes detrimental and sometimes beneficial, depending on the time of exposure to the toxic agent. Due to the above, despite being simple, the model could have the ability to recapitulate the behavior seen in nature from variables that we can calculate easily with single-cell measurements. However, in other situations, it could be helpful to consider the addition of variables such as cell wall production and peptidoglycans’ accumulation, among others. Notwithstanding the lack of parameters that are a little closer to reality, confirming that the model can work under experimental conditions would represent an achievement due to its explanatory simplicity, starting, in this way, the path of the study of filamentation oriented to the ecology of stress. "],["cites-and-refs.html", "3 Citations, cross-references, and collaboration 3.1 Citations 3.2 Cross-referencing 3.3 Collaborative writing 3.4 Additional resources", " 3 Citations, cross-references, and collaboration 3.1 Citations The usual way to include citations in an R Markdown document is to put references in a plain text file with the extension .bib, in BibTex format.1 Then reference the path to this file in index.Rmd’s YAML header with bibliography: example.bib. Most reference managers can create a .bib file with you references automatically. However, the by far best reference manager to use with R Markdown is Zotero with the Better BibTex plug-in, because the citr plugin for RStudio (see below) can read references directly from your Zotero library! Here is an example of an entry in a .bib file: @article{Shea2014, author = {Shea, Nicholas and Boldt, Annika}, journal = {Trends in Cognitive Sciences}, pages = {186--193}, title = {{Supra-personal cognitive control}}, volume = {18}, year = {2014}, doi = {10.1016/j.tics.2014.01.006}, } In this entry highlighed section, ‘Shea2014’ is the citation identifier. To default way to cite an entry in your text is with this syntax: [@citation-identifier]. So I might cite some things (Shea et al. 2014; Lottridge et al. 2012). 3.1.1 PDF output In PDF output, the bibliography is handled by the OxThesis LaTeX template. If you set bib-humanities: true in index.Rmd, then in-text references will be formatted as author-year; otherwise references will be shown as numbers. If you choose author-year formatting, a number of variations on the citation syntax are useful to know: Put author names outside the parenthesis This: @Shea2014 says blah. Becomes: Shea et al. (2014) says blah. Include only the citation-year (in parenthesis) This: Shea et al. says blah [-@Shea2014] Becomes: Shea et al. says blah (2014) Add text and page or chapter references to the citation This: [see @Shea2014, pp. 33-35; also @Wu2016, ch. 1] Becomes: Blah blah (see Shea et al. 2014, 33–35; also Wu 2016, ch. 1). 3.1.2 Gitbook output In gitbook output, citations are by default inserted in the Chicago author-date format. To change the format, add csl: some-other-style.csl in index.Rmd’s YAML header. You can browse through and download styles at zotero.org/styles. 3.1.3 Insert references easily with the citr add-in For an easy way to insert citations, try the citr RStudio add-in (Figure 3.1). You can install this add-in by typing install.packages(\"citr\") in the R Console. Figure 3.1: The citr add-in 3.2 Cross-referencing We can make cross-references to sections within our document, as well as to figures (images and plots) and tables. The general cross-referencing syntax is \\@ref(label) 3.2.1 Section references Headers are automatically assigned a reference label, which is the text in lower caps separated by dashes. For example, # My header is automatically given the label my-header. So # My header can be referenced with \\@ref(my-section) Remember what we wrote in section 3.1? We can also use hyperlink syntax and add # before the label, though this is only guaranteed to work properly in HTML output: So if we write Remember what we wrote up in [the previous section](#citations)? It becomes Remember what we wrote up in the previous section? 3.2.1.1 Creating custom labels It is a very good idea to create custom labels for our sections. This is because the automatically assigned labels will change when we change the titles of the sections - to avoid this, we can create the labels ourselves and leave them untouched if we change the section titles. We create custom labels by adding {#label} after a header, e.g. # My section {#my-label}. See our chapter title for an example. That was section 3. 3.2.2 Figure (image and plot) references To refer to figures (i.e. images and plots) use the syntax \\@ref(fig:label) GOTCHA: Figures and tables must have captions if you wish to cross-reference them. Let’s add an image: knitr::include_graphics(&quot;figures/sample-content/captain.jpeg&quot;) Figure 3.2: A marvel-lous meme We refer to this image with \\@ref(fig:captain). So Figure 3.2 is this image. And in Figure ?? we saw a cars plot. 3.2.3 Table references To refer to tables use the syntax \\@ref(tab:label) Let’s include a table: knitr::kable(cars[1:5,], caption=&quot;Stopping cars&quot;) Table 3.1: Stopping cars speed dist 4 2 4 10 7 4 7 22 8 16 We refer to this table with \\@ref(tab:cars-table2). So Table 3.1 is this table. And in Table ?? we saw more or less the same cars table. 3.2.4 Including page numbers Finally, in the PDF output we might also want to include the page number of a reference, so that it’s easy to find in physical printed output. LaTeX has a command for this, which looks like this: \\pageref{fig/tab:label} (note: curly braces, not parentheses) When we output to PDF, we can use raw LaTeX directly in our .Rmd files. So if we wanted to include the page of the cars plot we could write: This: Figure \\@ref(fig:cars-plot) on page \\pageref(fig:cars-plot) Becomes: Figure ?? on page 3.2.4.1 Include page numbers only in PDF output A problem here is that LaTeX commands don’t display in HTML output, so in the gitbook output we’d see simply “Figure ?? on page.” One way to get around this is to use inline R code to insert the text, and use an ifelse statement to check the output format and then insert the appropriate text. So this: `r ifelse(knitr::is_latex_output(), \"Figure \\\\@ref(fig:cars-plot) on page \\\\pageref{fig:cars-plot}\", \"\")` Inserts this (check this on both PDF and gitbook): Note that we need to escape the backslash with another backslash here to get the correct output. 3.3 Collaborative writing Best practices for collaboration and change tracking when using R Markdown are still an open question. In the blog post One year to dissertate by Lucy D’Agostino, which I highly recommend, the author notes that she knits .Rmd files to a word document, then uses the googledrive R package to send this to Google Drive for comments / revisions from co-authors, then incorporates Google Drive suggestions by hand into the .Rmd source files. This is a bit clunky, and there are ongoing discussions among the R Markdown developers about what the best way is to handle collaborative writing (see issue #1463 on GitHub, where CriticMarkup is among the suggestions). For now, this is an open question in the community of R Markdown users. I often knit to a format that can easily be imported to Google Docs for comments, then go over suggested revisions and manually incorporate them back in to the .Rmd source files. For articles, I sometimes upload a near-final draft to Overleaf, then collaboratively make final edits to the LaTeX file there. I suspect some great solution will be developed in the not-to-distant future, probably by the RStudio team. 3.4 Additional resources R Markdown: The Definitive Guide - https://bookdown.org/yihui/rmarkdown/ R for Data Science - https://r4ds.had.co.nz References "],["tables.html", "4 Tables 4.1 Making LaTeX tables play nice", " 4 Tables 4.1 Making LaTeX tables play nice Dealing with tables in LaTeX can be painful. This section explains the main tricks you need to make the pain go away. (Note: if you are looking at the ebook version, you will not see much difference in this section, as it is only relevant for PDF output!) 4.1.1 Making your table pretty When you use kable to create tables, you will almost certainly want to set the option booktabs = TRUE. This makes your table look a million times better: library(knitr) library(tidyverse) head(mtcars) %&gt;% kable(booktabs = TRUE) mpg cyl disp hp drat wt qsec vs am gear carb Mazda RX4 21.0 6 160 110 3.90 2.620 16.46 0 1 4 4 Mazda RX4 Wag 21.0 6 160 110 3.90 2.875 17.02 0 1 4 4 Datsun 710 22.8 4 108 93 3.85 2.320 18.61 1 1 4 1 Hornet 4 Drive 21.4 6 258 110 3.08 3.215 19.44 1 0 3 1 Hornet Sportabout 18.7 8 360 175 3.15 3.440 17.02 0 0 3 2 Valiant 18.1 6 225 105 2.76 3.460 20.22 1 0 3 1 Compare this to the default style, which looks terrible: head(mtcars) %&gt;% kable() mpg cyl disp hp drat wt qsec vs am gear carb Mazda RX4 21.0 6 160 110 3.90 2.620 16.46 0 1 4 4 Mazda RX4 Wag 21.0 6 160 110 3.90 2.875 17.02 0 1 4 4 Datsun 710 22.8 4 108 93 3.85 2.320 18.61 1 1 4 1 Hornet 4 Drive 21.4 6 258 110 3.08 3.215 19.44 1 0 3 1 Hornet Sportabout 18.7 8 360 175 3.15 3.440 17.02 0 0 3 2 Valiant 18.1 6 225 105 2.76 3.460 20.22 1 0 3 1 4.1.2 If your table is too wide You might find that your table expands into the margins of the page, like the tables above. Fix this with the kable_styling function from the kableExtra package: library(kableExtra) head(mtcars) %&gt;% kable(booktabs = TRUE) %&gt;% kable_styling(latex_options = &quot;scale_down&quot;) mpg cyl disp hp drat wt qsec vs am gear carb Mazda RX4 21.0 6 160 110 3.90 2.620 16.46 0 1 4 4 Mazda RX4 Wag 21.0 6 160 110 3.90 2.875 17.02 0 1 4 4 Datsun 710 22.8 4 108 93 3.85 2.320 18.61 1 1 4 1 Hornet 4 Drive 21.4 6 258 110 3.08 3.215 19.44 1 0 3 1 Hornet Sportabout 18.7 8 360 175 3.15 3.440 17.02 0 0 3 2 Valiant 18.1 6 225 105 2.76 3.460 20.22 1 0 3 1 This scales down the table to fit the page width. 4.1.3 If your table is too long If your table is too long to fit on a single page, set longtable = TRUE in the kable function to split the table across multiple pages. a_long_table &lt;- rbind(mtcars, mtcars) a_long_table %&gt;% select(1:8) %&gt;% kable(booktabs = TRUE, longtable = TRUE) mpg cyl disp hp drat wt qsec vs Mazda RX4 21.0 6 160.0 110 3.90 2.620 16.46 0 Mazda RX4 Wag 21.0 6 160.0 110 3.90 2.875 17.02 0 Datsun 710 22.8 4 108.0 93 3.85 2.320 18.61 1 Hornet 4 Drive 21.4 6 258.0 110 3.08 3.215 19.44 1 Hornet Sportabout 18.7 8 360.0 175 3.15 3.440 17.02 0 Valiant 18.1 6 225.0 105 2.76 3.460 20.22 1 Duster 360 14.3 8 360.0 245 3.21 3.570 15.84 0 Merc 240D 24.4 4 146.7 62 3.69 3.190 20.00 1 Merc 230 22.8 4 140.8 95 3.92 3.150 22.90 1 Merc 280 19.2 6 167.6 123 3.92 3.440 18.30 1 Merc 280C 17.8 6 167.6 123 3.92 3.440 18.90 1 Merc 450SE 16.4 8 275.8 180 3.07 4.070 17.40 0 Merc 450SL 17.3 8 275.8 180 3.07 3.730 17.60 0 Merc 450SLC 15.2 8 275.8 180 3.07 3.780 18.00 0 Cadillac Fleetwood 10.4 8 472.0 205 2.93 5.250 17.98 0 Lincoln Continental 10.4 8 460.0 215 3.00 5.424 17.82 0 Chrysler Imperial 14.7 8 440.0 230 3.23 5.345 17.42 0 Fiat 128 32.4 4 78.7 66 4.08 2.200 19.47 1 Honda Civic 30.4 4 75.7 52 4.93 1.615 18.52 1 Toyota Corolla 33.9 4 71.1 65 4.22 1.835 19.90 1 Toyota Corona 21.5 4 120.1 97 3.70 2.465 20.01 1 Dodge Challenger 15.5 8 318.0 150 2.76 3.520 16.87 0 AMC Javelin 15.2 8 304.0 150 3.15 3.435 17.30 0 Camaro Z28 13.3 8 350.0 245 3.73 3.840 15.41 0 Pontiac Firebird 19.2 8 400.0 175 3.08 3.845 17.05 0 Fiat X1-9 27.3 4 79.0 66 4.08 1.935 18.90 1 Porsche 914-2 26.0 4 120.3 91 4.43 2.140 16.70 0 Lotus Europa 30.4 4 95.1 113 3.77 1.513 16.90 1 Ford Pantera L 15.8 8 351.0 264 4.22 3.170 14.50 0 Ferrari Dino 19.7 6 145.0 175 3.62 2.770 15.50 0 Maserati Bora 15.0 8 301.0 335 3.54 3.570 14.60 0 Volvo 142E 21.4 4 121.0 109 4.11 2.780 18.60 1 Mazda RX41 21.0 6 160.0 110 3.90 2.620 16.46 0 Mazda RX4 Wag1 21.0 6 160.0 110 3.90 2.875 17.02 0 Datsun 7101 22.8 4 108.0 93 3.85 2.320 18.61 1 Hornet 4 Drive1 21.4 6 258.0 110 3.08 3.215 19.44 1 Hornet Sportabout1 18.7 8 360.0 175 3.15 3.440 17.02 0 Valiant1 18.1 6 225.0 105 2.76 3.460 20.22 1 Duster 3601 14.3 8 360.0 245 3.21 3.570 15.84 0 Merc 240D1 24.4 4 146.7 62 3.69 3.190 20.00 1 Merc 2301 22.8 4 140.8 95 3.92 3.150 22.90 1 Merc 2801 19.2 6 167.6 123 3.92 3.440 18.30 1 Merc 280C1 17.8 6 167.6 123 3.92 3.440 18.90 1 Merc 450SE1 16.4 8 275.8 180 3.07 4.070 17.40 0 Merc 450SL1 17.3 8 275.8 180 3.07 3.730 17.60 0 Merc 450SLC1 15.2 8 275.8 180 3.07 3.780 18.00 0 Cadillac Fleetwood1 10.4 8 472.0 205 2.93 5.250 17.98 0 Lincoln Continental1 10.4 8 460.0 215 3.00 5.424 17.82 0 Chrysler Imperial1 14.7 8 440.0 230 3.23 5.345 17.42 0 Fiat 1281 32.4 4 78.7 66 4.08 2.200 19.47 1 Honda Civic1 30.4 4 75.7 52 4.93 1.615 18.52 1 Toyota Corolla1 33.9 4 71.1 65 4.22 1.835 19.90 1 Toyota Corona1 21.5 4 120.1 97 3.70 2.465 20.01 1 Dodge Challenger1 15.5 8 318.0 150 2.76 3.520 16.87 0 AMC Javelin1 15.2 8 304.0 150 3.15 3.435 17.30 0 Camaro Z281 13.3 8 350.0 245 3.73 3.840 15.41 0 Pontiac Firebird1 19.2 8 400.0 175 3.08 3.845 17.05 0 Fiat X1-91 27.3 4 79.0 66 4.08 1.935 18.90 1 Porsche 914-21 26.0 4 120.3 91 4.43 2.140 16.70 0 Lotus Europa1 30.4 4 95.1 113 3.77 1.513 16.90 1 Ford Pantera L1 15.8 8 351.0 264 4.22 3.170 14.50 0 Ferrari Dino1 19.7 6 145.0 175 3.62 2.770 15.50 0 Maserati Bora1 15.0 8 301.0 335 3.54 3.570 14.60 0 Volvo 142E1 21.4 4 121.0 109 4.11 2.780 18.60 1 When you do this, you’ll probably want to make the header repeat on new pages. Do this with the kable_styling function from kableExtra: a_long_table %&gt;% kable(booktabs = TRUE, longtable = TRUE) %&gt;% kable_styling(latex_options = &quot;repeat_header&quot;) mpg cyl disp hp drat wt qsec vs am gear carb Mazda RX4 21.0 6 160.0 110 3.90 2.620 16.46 0 1 4 4 Mazda RX4 Wag 21.0 6 160.0 110 3.90 2.875 17.02 0 1 4 4 Datsun 710 22.8 4 108.0 93 3.85 2.320 18.61 1 1 4 1 Hornet 4 Drive 21.4 6 258.0 110 3.08 3.215 19.44 1 0 3 1 Hornet Sportabout 18.7 8 360.0 175 3.15 3.440 17.02 0 0 3 2 Valiant 18.1 6 225.0 105 2.76 3.460 20.22 1 0 3 1 Duster 360 14.3 8 360.0 245 3.21 3.570 15.84 0 0 3 4 Merc 240D 24.4 4 146.7 62 3.69 3.190 20.00 1 0 4 2 Merc 230 22.8 4 140.8 95 3.92 3.150 22.90 1 0 4 2 Merc 280 19.2 6 167.6 123 3.92 3.440 18.30 1 0 4 4 Merc 280C 17.8 6 167.6 123 3.92 3.440 18.90 1 0 4 4 Merc 450SE 16.4 8 275.8 180 3.07 4.070 17.40 0 0 3 3 Merc 450SL 17.3 8 275.8 180 3.07 3.730 17.60 0 0 3 3 Merc 450SLC 15.2 8 275.8 180 3.07 3.780 18.00 0 0 3 3 Cadillac Fleetwood 10.4 8 472.0 205 2.93 5.250 17.98 0 0 3 4 Lincoln Continental 10.4 8 460.0 215 3.00 5.424 17.82 0 0 3 4 Chrysler Imperial 14.7 8 440.0 230 3.23 5.345 17.42 0 0 3 4 Fiat 128 32.4 4 78.7 66 4.08 2.200 19.47 1 1 4 1 Honda Civic 30.4 4 75.7 52 4.93 1.615 18.52 1 1 4 2 Toyota Corolla 33.9 4 71.1 65 4.22 1.835 19.90 1 1 4 1 Toyota Corona 21.5 4 120.1 97 3.70 2.465 20.01 1 0 3 1 Dodge Challenger 15.5 8 318.0 150 2.76 3.520 16.87 0 0 3 2 AMC Javelin 15.2 8 304.0 150 3.15 3.435 17.30 0 0 3 2 Camaro Z28 13.3 8 350.0 245 3.73 3.840 15.41 0 0 3 4 Pontiac Firebird 19.2 8 400.0 175 3.08 3.845 17.05 0 0 3 2 Fiat X1-9 27.3 4 79.0 66 4.08 1.935 18.90 1 1 4 1 Porsche 914-2 26.0 4 120.3 91 4.43 2.140 16.70 0 1 5 2 Lotus Europa 30.4 4 95.1 113 3.77 1.513 16.90 1 1 5 2 Ford Pantera L 15.8 8 351.0 264 4.22 3.170 14.50 0 1 5 4 Ferrari Dino 19.7 6 145.0 175 3.62 2.770 15.50 0 1 5 6 Maserati Bora 15.0 8 301.0 335 3.54 3.570 14.60 0 1 5 8 Volvo 142E 21.4 4 121.0 109 4.11 2.780 18.60 1 1 4 2 Mazda RX41 21.0 6 160.0 110 3.90 2.620 16.46 0 1 4 4 Mazda RX4 Wag1 21.0 6 160.0 110 3.90 2.875 17.02 0 1 4 4 Datsun 7101 22.8 4 108.0 93 3.85 2.320 18.61 1 1 4 1 Hornet 4 Drive1 21.4 6 258.0 110 3.08 3.215 19.44 1 0 3 1 Hornet Sportabout1 18.7 8 360.0 175 3.15 3.440 17.02 0 0 3 2 Valiant1 18.1 6 225.0 105 2.76 3.460 20.22 1 0 3 1 Duster 3601 14.3 8 360.0 245 3.21 3.570 15.84 0 0 3 4 Merc 240D1 24.4 4 146.7 62 3.69 3.190 20.00 1 0 4 2 Merc 2301 22.8 4 140.8 95 3.92 3.150 22.90 1 0 4 2 Merc 2801 19.2 6 167.6 123 3.92 3.440 18.30 1 0 4 4 Merc 280C1 17.8 6 167.6 123 3.92 3.440 18.90 1 0 4 4 Merc 450SE1 16.4 8 275.8 180 3.07 4.070 17.40 0 0 3 3 Merc 450SL1 17.3 8 275.8 180 3.07 3.730 17.60 0 0 3 3 Merc 450SLC1 15.2 8 275.8 180 3.07 3.780 18.00 0 0 3 3 Cadillac Fleetwood1 10.4 8 472.0 205 2.93 5.250 17.98 0 0 3 4 Lincoln Continental1 10.4 8 460.0 215 3.00 5.424 17.82 0 0 3 4 Chrysler Imperial1 14.7 8 440.0 230 3.23 5.345 17.42 0 0 3 4 Fiat 1281 32.4 4 78.7 66 4.08 2.200 19.47 1 1 4 1 Honda Civic1 30.4 4 75.7 52 4.93 1.615 18.52 1 1 4 2 Toyota Corolla1 33.9 4 71.1 65 4.22 1.835 19.90 1 1 4 1 Toyota Corona1 21.5 4 120.1 97 3.70 2.465 20.01 1 0 3 1 Dodge Challenger1 15.5 8 318.0 150 2.76 3.520 16.87 0 0 3 2 AMC Javelin1 15.2 8 304.0 150 3.15 3.435 17.30 0 0 3 2 Camaro Z281 13.3 8 350.0 245 3.73 3.840 15.41 0 0 3 4 Pontiac Firebird1 19.2 8 400.0 175 3.08 3.845 17.05 0 0 3 2 Fiat X1-91 27.3 4 79.0 66 4.08 1.935 18.90 1 1 4 1 Porsche 914-21 26.0 4 120.3 91 4.43 2.140 16.70 0 1 5 2 Lotus Europa1 30.4 4 95.1 113 3.77 1.513 16.90 1 1 5 2 Ford Pantera L1 15.8 8 351.0 264 4.22 3.170 14.50 0 1 5 4 Ferrari Dino1 19.7 6 145.0 175 3.62 2.770 15.50 0 1 5 6 Maserati Bora1 15.0 8 301.0 335 3.54 3.570 14.60 0 1 5 8 Volvo 142E1 21.4 4 121.0 109 4.11 2.780 18.60 1 1 4 2 Unfortunately, we cannot use the scale_down option with a longtable. So if a longtable is too wide, you can either manually adjust the font size, or show the table in landscape layout. To adjust the font size, use kableExtra’s font_size option: a_long_table %&gt;% kable(booktabs = TRUE, longtable = TRUE) %&gt;% kable_styling(font_size = 9, latex_options = &quot;repeat_header&quot;) mpg cyl disp hp drat wt qsec vs am gear carb Mazda RX4 21.0 6 160.0 110 3.90 2.620 16.46 0 1 4 4 Mazda RX4 Wag 21.0 6 160.0 110 3.90 2.875 17.02 0 1 4 4 Datsun 710 22.8 4 108.0 93 3.85 2.320 18.61 1 1 4 1 Hornet 4 Drive 21.4 6 258.0 110 3.08 3.215 19.44 1 0 3 1 Hornet Sportabout 18.7 8 360.0 175 3.15 3.440 17.02 0 0 3 2 Valiant 18.1 6 225.0 105 2.76 3.460 20.22 1 0 3 1 Duster 360 14.3 8 360.0 245 3.21 3.570 15.84 0 0 3 4 Merc 240D 24.4 4 146.7 62 3.69 3.190 20.00 1 0 4 2 Merc 230 22.8 4 140.8 95 3.92 3.150 22.90 1 0 4 2 Merc 280 19.2 6 167.6 123 3.92 3.440 18.30 1 0 4 4 Merc 280C 17.8 6 167.6 123 3.92 3.440 18.90 1 0 4 4 Merc 450SE 16.4 8 275.8 180 3.07 4.070 17.40 0 0 3 3 Merc 450SL 17.3 8 275.8 180 3.07 3.730 17.60 0 0 3 3 Merc 450SLC 15.2 8 275.8 180 3.07 3.780 18.00 0 0 3 3 Cadillac Fleetwood 10.4 8 472.0 205 2.93 5.250 17.98 0 0 3 4 Lincoln Continental 10.4 8 460.0 215 3.00 5.424 17.82 0 0 3 4 Chrysler Imperial 14.7 8 440.0 230 3.23 5.345 17.42 0 0 3 4 Fiat 128 32.4 4 78.7 66 4.08 2.200 19.47 1 1 4 1 Honda Civic 30.4 4 75.7 52 4.93 1.615 18.52 1 1 4 2 Toyota Corolla 33.9 4 71.1 65 4.22 1.835 19.90 1 1 4 1 Toyota Corona 21.5 4 120.1 97 3.70 2.465 20.01 1 0 3 1 Dodge Challenger 15.5 8 318.0 150 2.76 3.520 16.87 0 0 3 2 AMC Javelin 15.2 8 304.0 150 3.15 3.435 17.30 0 0 3 2 Camaro Z28 13.3 8 350.0 245 3.73 3.840 15.41 0 0 3 4 Pontiac Firebird 19.2 8 400.0 175 3.08 3.845 17.05 0 0 3 2 Fiat X1-9 27.3 4 79.0 66 4.08 1.935 18.90 1 1 4 1 Porsche 914-2 26.0 4 120.3 91 4.43 2.140 16.70 0 1 5 2 Lotus Europa 30.4 4 95.1 113 3.77 1.513 16.90 1 1 5 2 Ford Pantera L 15.8 8 351.0 264 4.22 3.170 14.50 0 1 5 4 Ferrari Dino 19.7 6 145.0 175 3.62 2.770 15.50 0 1 5 6 Maserati Bora 15.0 8 301.0 335 3.54 3.570 14.60 0 1 5 8 Volvo 142E 21.4 4 121.0 109 4.11 2.780 18.60 1 1 4 2 Mazda RX41 21.0 6 160.0 110 3.90 2.620 16.46 0 1 4 4 Mazda RX4 Wag1 21.0 6 160.0 110 3.90 2.875 17.02 0 1 4 4 Datsun 7101 22.8 4 108.0 93 3.85 2.320 18.61 1 1 4 1 Hornet 4 Drive1 21.4 6 258.0 110 3.08 3.215 19.44 1 0 3 1 Hornet Sportabout1 18.7 8 360.0 175 3.15 3.440 17.02 0 0 3 2 Valiant1 18.1 6 225.0 105 2.76 3.460 20.22 1 0 3 1 Duster 3601 14.3 8 360.0 245 3.21 3.570 15.84 0 0 3 4 Merc 240D1 24.4 4 146.7 62 3.69 3.190 20.00 1 0 4 2 Merc 2301 22.8 4 140.8 95 3.92 3.150 22.90 1 0 4 2 Merc 2801 19.2 6 167.6 123 3.92 3.440 18.30 1 0 4 4 Merc 280C1 17.8 6 167.6 123 3.92 3.440 18.90 1 0 4 4 Merc 450SE1 16.4 8 275.8 180 3.07 4.070 17.40 0 0 3 3 Merc 450SL1 17.3 8 275.8 180 3.07 3.730 17.60 0 0 3 3 Merc 450SLC1 15.2 8 275.8 180 3.07 3.780 18.00 0 0 3 3 Cadillac Fleetwood1 10.4 8 472.0 205 2.93 5.250 17.98 0 0 3 4 Lincoln Continental1 10.4 8 460.0 215 3.00 5.424 17.82 0 0 3 4 Chrysler Imperial1 14.7 8 440.0 230 3.23 5.345 17.42 0 0 3 4 Fiat 1281 32.4 4 78.7 66 4.08 2.200 19.47 1 1 4 1 Honda Civic1 30.4 4 75.7 52 4.93 1.615 18.52 1 1 4 2 Toyota Corolla1 33.9 4 71.1 65 4.22 1.835 19.90 1 1 4 1 Toyota Corona1 21.5 4 120.1 97 3.70 2.465 20.01 1 0 3 1 Dodge Challenger1 15.5 8 318.0 150 2.76 3.520 16.87 0 0 3 2 AMC Javelin1 15.2 8 304.0 150 3.15 3.435 17.30 0 0 3 2 Camaro Z281 13.3 8 350.0 245 3.73 3.840 15.41 0 0 3 4 Pontiac Firebird1 19.2 8 400.0 175 3.08 3.845 17.05 0 0 3 2 Fiat X1-91 27.3 4 79.0 66 4.08 1.935 18.90 1 1 4 1 Porsche 914-21 26.0 4 120.3 91 4.43 2.140 16.70 0 1 5 2 Lotus Europa1 30.4 4 95.1 113 3.77 1.513 16.90 1 1 5 2 Ford Pantera L1 15.8 8 351.0 264 4.22 3.170 14.50 0 1 5 4 Ferrari Dino1 19.7 6 145.0 175 3.62 2.770 15.50 0 1 5 6 Maserati Bora1 15.0 8 301.0 335 3.54 3.570 14.60 0 1 5 8 Volvo 142E1 21.4 4 121.0 109 4.11 2.780 18.60 1 1 4 2 To put the table in landscape mode, use kableExtra’s landscape function: a_long_table %&gt;% kable(booktabs = TRUE, longtable = TRUE) %&gt;% kable_styling(latex_options = &quot;repeat_header&quot;) %&gt;% landscape() mpg cyl disp hp drat wt qsec vs am gear carb Mazda RX4 21.0 6 160.0 110 3.90 2.620 16.46 0 1 4 4 Mazda RX4 Wag 21.0 6 160.0 110 3.90 2.875 17.02 0 1 4 4 Datsun 710 22.8 4 108.0 93 3.85 2.320 18.61 1 1 4 1 Hornet 4 Drive 21.4 6 258.0 110 3.08 3.215 19.44 1 0 3 1 Hornet Sportabout 18.7 8 360.0 175 3.15 3.440 17.02 0 0 3 2 Valiant 18.1 6 225.0 105 2.76 3.460 20.22 1 0 3 1 Duster 360 14.3 8 360.0 245 3.21 3.570 15.84 0 0 3 4 Merc 240D 24.4 4 146.7 62 3.69 3.190 20.00 1 0 4 2 Merc 230 22.8 4 140.8 95 3.92 3.150 22.90 1 0 4 2 Merc 280 19.2 6 167.6 123 3.92 3.440 18.30 1 0 4 4 Merc 280C 17.8 6 167.6 123 3.92 3.440 18.90 1 0 4 4 Merc 450SE 16.4 8 275.8 180 3.07 4.070 17.40 0 0 3 3 Merc 450SL 17.3 8 275.8 180 3.07 3.730 17.60 0 0 3 3 Merc 450SLC 15.2 8 275.8 180 3.07 3.780 18.00 0 0 3 3 Cadillac Fleetwood 10.4 8 472.0 205 2.93 5.250 17.98 0 0 3 4 Lincoln Continental 10.4 8 460.0 215 3.00 5.424 17.82 0 0 3 4 Chrysler Imperial 14.7 8 440.0 230 3.23 5.345 17.42 0 0 3 4 Fiat 128 32.4 4 78.7 66 4.08 2.200 19.47 1 1 4 1 Honda Civic 30.4 4 75.7 52 4.93 1.615 18.52 1 1 4 2 Toyota Corolla 33.9 4 71.1 65 4.22 1.835 19.90 1 1 4 1 Toyota Corona 21.5 4 120.1 97 3.70 2.465 20.01 1 0 3 1 Dodge Challenger 15.5 8 318.0 150 2.76 3.520 16.87 0 0 3 2 AMC Javelin 15.2 8 304.0 150 3.15 3.435 17.30 0 0 3 2 Camaro Z28 13.3 8 350.0 245 3.73 3.840 15.41 0 0 3 4 Pontiac Firebird 19.2 8 400.0 175 3.08 3.845 17.05 0 0 3 2 Fiat X1-9 27.3 4 79.0 66 4.08 1.935 18.90 1 1 4 1 Porsche 914-2 26.0 4 120.3 91 4.43 2.140 16.70 0 1 5 2 Lotus Europa 30.4 4 95.1 113 3.77 1.513 16.90 1 1 5 2 Ford Pantera L 15.8 8 351.0 264 4.22 3.170 14.50 0 1 5 4 Ferrari Dino 19.7 6 145.0 175 3.62 2.770 15.50 0 1 5 6 Maserati Bora 15.0 8 301.0 335 3.54 3.570 14.60 0 1 5 8 Volvo 142E 21.4 4 121.0 109 4.11 2.780 18.60 1 1 4 2 Mazda RX41 21.0 6 160.0 110 3.90 2.620 16.46 0 1 4 4 Mazda RX4 Wag1 21.0 6 160.0 110 3.90 2.875 17.02 0 1 4 4 Datsun 7101 22.8 4 108.0 93 3.85 2.320 18.61 1 1 4 1 Hornet 4 Drive1 21.4 6 258.0 110 3.08 3.215 19.44 1 0 3 1 Hornet Sportabout1 18.7 8 360.0 175 3.15 3.440 17.02 0 0 3 2 Valiant1 18.1 6 225.0 105 2.76 3.460 20.22 1 0 3 1 Duster 3601 14.3 8 360.0 245 3.21 3.570 15.84 0 0 3 4 Merc 240D1 24.4 4 146.7 62 3.69 3.190 20.00 1 0 4 2 Merc 2301 22.8 4 140.8 95 3.92 3.150 22.90 1 0 4 2 Merc 2801 19.2 6 167.6 123 3.92 3.440 18.30 1 0 4 4 Merc 280C1 17.8 6 167.6 123 3.92 3.440 18.90 1 0 4 4 Merc 450SE1 16.4 8 275.8 180 3.07 4.070 17.40 0 0 3 3 Merc 450SL1 17.3 8 275.8 180 3.07 3.730 17.60 0 0 3 3 Merc 450SLC1 15.2 8 275.8 180 3.07 3.780 18.00 0 0 3 3 Cadillac Fleetwood1 10.4 8 472.0 205 2.93 5.250 17.98 0 0 3 4 Lincoln Continental1 10.4 8 460.0 215 3.00 5.424 17.82 0 0 3 4 Chrysler Imperial1 14.7 8 440.0 230 3.23 5.345 17.42 0 0 3 4 Fiat 1281 32.4 4 78.7 66 4.08 2.200 19.47 1 1 4 1 Honda Civic1 30.4 4 75.7 52 4.93 1.615 18.52 1 1 4 2 Toyota Corolla1 33.9 4 71.1 65 4.22 1.835 19.90 1 1 4 1 Toyota Corona1 21.5 4 120.1 97 3.70 2.465 20.01 1 0 3 1 Dodge Challenger1 15.5 8 318.0 150 2.76 3.520 16.87 0 0 3 2 AMC Javelin1 15.2 8 304.0 150 3.15 3.435 17.30 0 0 3 2 Camaro Z281 13.3 8 350.0 245 3.73 3.840 15.41 0 0 3 4 Pontiac Firebird1 19.2 8 400.0 175 3.08 3.845 17.05 0 0 3 2 Fiat X1-91 27.3 4 79.0 66 4.08 1.935 18.90 1 1 4 1 Porsche 914-21 26.0 4 120.3 91 4.43 2.140 16.70 0 1 5 2 Lotus Europa1 30.4 4 95.1 113 3.77 1.513 16.90 1 1 5 2 Ford Pantera L1 15.8 8 351.0 264 4.22 3.170 14.50 0 1 5 4 Ferrari Dino1 19.7 6 145.0 175 3.62 2.770 15.50 0 1 5 6 Maserati Bora1 15.0 8 301.0 335 3.54 3.570 14.60 0 1 5 8 Volvo 142E1 21.4 4 121.0 109 4.11 2.780 18.60 1 1 4 2 4.1.4 Max power: manually adjust the raw LaTeX output For total flexibility, you can adjust the raw LaTeX output from kable/kableExtra that generates the table. Let us consider how we would do this for the example of adjusting the font size if our table is too wide: Latex has a bunch of standard commands that set an approximate font size, as shown below in Figure 4.1. Figure 4.1: Font sizes in LaTeX You could use these to manually adjust the font size in your longtable in two steps: Wrap the longtable environment in, e.g., a scriptsize environment, by doing a string replacement in the output from kable/kableExtra Add the attributes that make R Markdown understand that the table is a table (it seems R drops these when we do the string replacement) our_adjusted_table &lt;- a_long_table %&gt;% kable(booktabs = TRUE, longtable = TRUE) %&gt;% kable_styling(latex_options = &quot;repeat_header&quot;) %&gt;% # wrap the longtable in a tiny environment str_replace(&#39;\\\\\\\\begin\\\\{longtable\\\\}&#39;, &#39;\\\\\\\\begin\\\\{scriptsize\\\\}\\n\\\\\\\\begin\\\\{longtable\\\\}&#39;) %&gt;% str_replace(&#39;\\\\\\\\end\\\\{longtable\\\\}&#39;, &#39;\\\\\\\\end\\\\{longtable\\\\}\\n\\\\\\\\end\\\\{scriptsize\\\\}&#39;) #add attributes to make R Markdown treat this as a kable LaTeX table again our_adjusted_table %&gt;% structure(format = &quot;latex&quot;, class = &quot;knitr_kable&quot;) mpg cyl disp hp drat wt qsec vs am gear carb Mazda RX4 21.0 6 160.0 110 3.90 2.620 16.46 0 1 4 4 Mazda RX4 Wag 21.0 6 160.0 110 3.90 2.875 17.02 0 1 4 4 Datsun 710 22.8 4 108.0 93 3.85 2.320 18.61 1 1 4 1 Hornet 4 Drive 21.4 6 258.0 110 3.08 3.215 19.44 1 0 3 1 Hornet Sportabout 18.7 8 360.0 175 3.15 3.440 17.02 0 0 3 2 Valiant 18.1 6 225.0 105 2.76 3.460 20.22 1 0 3 1 Duster 360 14.3 8 360.0 245 3.21 3.570 15.84 0 0 3 4 Merc 240D 24.4 4 146.7 62 3.69 3.190 20.00 1 0 4 2 Merc 230 22.8 4 140.8 95 3.92 3.150 22.90 1 0 4 2 Merc 280 19.2 6 167.6 123 3.92 3.440 18.30 1 0 4 4 Merc 280C 17.8 6 167.6 123 3.92 3.440 18.90 1 0 4 4 Merc 450SE 16.4 8 275.8 180 3.07 4.070 17.40 0 0 3 3 Merc 450SL 17.3 8 275.8 180 3.07 3.730 17.60 0 0 3 3 Merc 450SLC 15.2 8 275.8 180 3.07 3.780 18.00 0 0 3 3 Cadillac Fleetwood 10.4 8 472.0 205 2.93 5.250 17.98 0 0 3 4 Lincoln Continental 10.4 8 460.0 215 3.00 5.424 17.82 0 0 3 4 Chrysler Imperial 14.7 8 440.0 230 3.23 5.345 17.42 0 0 3 4 Fiat 128 32.4 4 78.7 66 4.08 2.200 19.47 1 1 4 1 Honda Civic 30.4 4 75.7 52 4.93 1.615 18.52 1 1 4 2 Toyota Corolla 33.9 4 71.1 65 4.22 1.835 19.90 1 1 4 1 Toyota Corona 21.5 4 120.1 97 3.70 2.465 20.01 1 0 3 1 Dodge Challenger 15.5 8 318.0 150 2.76 3.520 16.87 0 0 3 2 AMC Javelin 15.2 8 304.0 150 3.15 3.435 17.30 0 0 3 2 Camaro Z28 13.3 8 350.0 245 3.73 3.840 15.41 0 0 3 4 Pontiac Firebird 19.2 8 400.0 175 3.08 3.845 17.05 0 0 3 2 Fiat X1-9 27.3 4 79.0 66 4.08 1.935 18.90 1 1 4 1 Porsche 914-2 26.0 4 120.3 91 4.43 2.140 16.70 0 1 5 2 Lotus Europa 30.4 4 95.1 113 3.77 1.513 16.90 1 1 5 2 Ford Pantera L 15.8 8 351.0 264 4.22 3.170 14.50 0 1 5 4 Ferrari Dino 19.7 6 145.0 175 3.62 2.770 15.50 0 1 5 6 Maserati Bora 15.0 8 301.0 335 3.54 3.570 14.60 0 1 5 8 Volvo 142E 21.4 4 121.0 109 4.11 2.780 18.60 1 1 4 2 Mazda RX41 21.0 6 160.0 110 3.90 2.620 16.46 0 1 4 4 Mazda RX4 Wag1 21.0 6 160.0 110 3.90 2.875 17.02 0 1 4 4 Datsun 7101 22.8 4 108.0 93 3.85 2.320 18.61 1 1 4 1 Hornet 4 Drive1 21.4 6 258.0 110 3.08 3.215 19.44 1 0 3 1 Hornet Sportabout1 18.7 8 360.0 175 3.15 3.440 17.02 0 0 3 2 Valiant1 18.1 6 225.0 105 2.76 3.460 20.22 1 0 3 1 Duster 3601 14.3 8 360.0 245 3.21 3.570 15.84 0 0 3 4 Merc 240D1 24.4 4 146.7 62 3.69 3.190 20.00 1 0 4 2 Merc 2301 22.8 4 140.8 95 3.92 3.150 22.90 1 0 4 2 Merc 2801 19.2 6 167.6 123 3.92 3.440 18.30 1 0 4 4 Merc 280C1 17.8 6 167.6 123 3.92 3.440 18.90 1 0 4 4 Merc 450SE1 16.4 8 275.8 180 3.07 4.070 17.40 0 0 3 3 Merc 450SL1 17.3 8 275.8 180 3.07 3.730 17.60 0 0 3 3 Merc 450SLC1 15.2 8 275.8 180 3.07 3.780 18.00 0 0 3 3 Cadillac Fleetwood1 10.4 8 472.0 205 2.93 5.250 17.98 0 0 3 4 Lincoln Continental1 10.4 8 460.0 215 3.00 5.424 17.82 0 0 3 4 Chrysler Imperial1 14.7 8 440.0 230 3.23 5.345 17.42 0 0 3 4 Fiat 1281 32.4 4 78.7 66 4.08 2.200 19.47 1 1 4 1 Honda Civic1 30.4 4 75.7 52 4.93 1.615 18.52 1 1 4 2 Toyota Corolla1 33.9 4 71.1 65 4.22 1.835 19.90 1 1 4 1 Toyota Corona1 21.5 4 120.1 97 3.70 2.465 20.01 1 0 3 1 Dodge Challenger1 15.5 8 318.0 150 2.76 3.520 16.87 0 0 3 2 AMC Javelin1 15.2 8 304.0 150 3.15 3.435 17.30 0 0 3 2 Camaro Z281 13.3 8 350.0 245 3.73 3.840 15.41 0 0 3 4 Pontiac Firebird1 19.2 8 400.0 175 3.08 3.845 17.05 0 0 3 2 Fiat X1-91 27.3 4 79.0 66 4.08 1.935 18.90 1 1 4 1 Porsche 914-21 26.0 4 120.3 91 4.43 2.140 16.70 0 1 5 2 Lotus Europa1 30.4 4 95.1 113 3.77 1.513 16.90 1 1 5 2 Ford Pantera L1 15.8 8 351.0 264 4.22 3.170 14.50 0 1 5 4 Ferrari Dino1 19.7 6 145.0 175 3.62 2.770 15.50 0 1 5 6 Maserati Bora1 15.0 8 301.0 335 3.54 3.570 14.60 0 1 5 8 Volvo 142E1 21.4 4 121.0 109 4.11 2.780 18.60 1 1 4 2 "],["customisations-and-extensions.html", "5 Customisations and extensions 5.1 Front matter 5.2 Shorten running header (PDF) 5.3 Unnumbered chapters 5.4 Beginning chapters with quotes (PDF) 5.5 Highlighting corrections (HTML &amp; PDF) 5.6 Apply custom font color and highlighting to text (HTML &amp; PDF) 5.7 Including another paper in your thesis - embed a PDF document 5.8 Including another paper in your thesis - R Markdown child document 5.9 Customizing referencing 5.10 Customizing the page headers and footers (PDF) 5.11 Diving in to the OxThesis LaTeX template (PDF) 5.12 Customising to a different university", " 5 Customisations and extensions This chapter describes a number of additional tips and tricks as well as possible customizations to the oxforddown thesis. 5.1 Front matter 5.1.1 Shorten captions shown in the list of figures (PDF) You might want your list of figures (which follows the table of contents) to have shorter (or just different) figure descriptions than the actual figure captions. Do this using the chunk option fig.scap (‘short caption’), for example {r captain-image, fig.cap=\"A very long and descriptive (and potentially boring) caption that doesn't fit in the list of figures, but helps the reader understand what the figure communicates.\", fig.scap=\"A concise description for the list of figures\" 5.1.2 Shorten captions shown in the list of tables (PDF) You might want your list of tables (which follows the list of figures in your thesis front matter) to have shorter (or just different) table descriptions than the actual table captions. If you are using knitr::kable to generate a table, you can do this with the argument caption.short, e.g.: knitr::kable(mtcars, caption = &quot;A very long and descriptive (and potentially boring) caption that doesn&#39;t fit in the list of figures, but helps the reader understand what the figure communicates.&quot;, caption.short = &quot;A concise description for the list of tables&quot;) 5.2 Shorten running header (PDF) You might want a chapter’s running header (i.e. the header showing the title of the current chapter at the top of page) to be shorter (or just different) to the actual chapter title. Do this by adding the latex command \\chaptermark{My shorter version} after your chapter title. For example, chapter 3‘s running header is simply ’Cites and cross-refs,’ because it begins like this: # Citations, cross-references, and collaboration {#cites-and-refs} \\chaptermark{Cites and cross-refs} 5.3 Unnumbered chapters To make chapters unnumbered (normally only relevant to the Introduction and/or the Conclusion), follow the chapter header with {-}, e.g. # Introduction {-}. When you do this, you must also follow the heading with these two latex commands: \\adjustmtc \\markboth{The Name of Your Unnumbered Chapter}{} Otherwise the chapter’s mini table of contents and the running header will show the previous chapter. 5.4 Beginning chapters with quotes (PDF) The OxThesis LaTeX template lets you inject some wittiness into your thesis by including a block of type savequote at the beginning of chapters. To do this, use the syntax ```{block type='savequote'}.2 Add the reference for the quote with the chunk option quote_author=\"my author name\". You will also want to add the chunk option include=knitr::is_latex_output() so that quotes are only included in PDF output. It’s not possible to use markdown syntax inside chunk options, so if you want to e.g. italicise a book name in the reference use a ‘text reference’: Create a named piece of text with ‘(ref:label-name) My text,’ then point to this in the chunk option with quote_author='(ref:label-name)'. 5.5 Highlighting corrections (HTML &amp; PDF) For when it comes time to do corrections, you may want to highlight changes made when you submit a post-viva, corrected copy to your examiners so they can quickly verify you’ve completed the task. You can do so like this: 5.5.1 Short, inline corrections Highlight short, inline corrections by doing [like this]{.correction} — the text between the square brackets will then be highlighted in blue in the output. Note that pandoc might get confused by citations and cross-references inside inline corrections. In particular, it might get confused by \"[what @Shea2014 said]{.correction}\" which becomes (what Shea et al. 2014 said){.correction} In such cases, you can use LaTeX syntax directly. The correction highlighting uses the soul package, so you can do like this: If using biblatex for references, use \"\\hl{what \\textcite{Shea2014} said} If using natbib for references, use \"\\hl{what \\cite{Shea2014} said} Using raw LaTeX has the drawback of corrections then not showing up in HTML output at all, but you might only care about correction highlighting in the PDF for your examiners anyway! 5.5.2 Blocks of added or changed material Highlight entire blocks of added or changed material by putting them in a block of type correction, using the syntax ```{block type='correction'}.3 Like so: For larger chunks, like this paragraph or indeed entire figures, you can use the correction block type. This environment highlights paragraph-sized and larger blocks with the same blue colour. Note that correction blocks cannot be included in word output. 5.5.3 Stopping corrections from being highlighted To turn off correction highlighting, go to the YAML header of index.Rmd, then: PDF output: set corrections: false HTML output: remove or comment out - templates/corrections.css 5.6 Apply custom font color and highlighting to text (HTML &amp; PDF) The lua filter that adds the functionality to highlight corrections adds two more tricks: you can apply your own choice of colour to highlight text, or change the font color. The syntax is as follows: Here’s [some text in pink highlighting]{highlight=\"pink\"} Becomes: Here’s some text in pink highlighting. [Here's some text with blue font]{color=\"blue\"} Becomes: Here’s some text with blue font Finally — never, ever actually do this – [here's some text with black highlighting and yellow font]{highlight=\"black\" color=\"yellow\"} Becomes: here’s some text with black highlighting and yellow font The file scripts_and_filters/colour_and_highlight.lua implements this, if you want to fiddle around with it. It works with both PDF and HTML output. 5.7 Including another paper in your thesis - embed a PDF document You may want to embed existing PDF documents into the thesis, for example if your department allows a ‘portfolio’ style thesis and you need to include an existing typeset publication as a chapter. In gitbook output, you can simply use knitr::include_graphics and it should include a scrollable (and downloadable) PDF. You will probably want to set the chunk options out.width='100%' and out.height='1000px': knitr::include_graphics(&quot;figures/sample-content/pdf_embed_example/Lyngs2020_FB.pdf&quot;) In LaTeX output, however, this approach can cause odd behaviour. Therefore, when you build your thesis to PDF, split the PDF into an alphanumerically sorted sequence of single-page PDF files (you can do this automatically with the package pdftools). You can then use the appropriate LaTeX command to insert them, as shown below (for brevity, in the oxforddown PDF sample content we’re only including two pages). Note that the chunk option results='asis' must be set. You may also want to remove margins from the PDF files, which you can do with Adobe Acrobat (paid version) and likely other software. # install.packages(pdftools) # split PDF into pages stored in figures/sample-content/pdf_embed_example/split/ # pdftools::pdf_split(&quot;figures/sample-content/pdf_embed_example/Lyngs2020_FB.pdf&quot;, # output = &quot;figures/sample-content/pdf_embed_example/split/&quot;) # grab the pages pages &lt;- list.files(&quot;figures/sample-content/pdf_embed_example/split&quot;, full.names = TRUE) # set how wide you want the inserted PDFs to be: # 1.0 is 100 per cent of the oxforddown PDF page width; # you may want to make it a bit bigger pdf_width &lt;- 1.2 # for each PDF page, insert it nicely and # end with a page break cat(stringr::str_c(&quot;\\\\newpage \\\\begin{center} \\\\makebox[\\\\linewidth][c]{\\\\includegraphics[width=&quot;, pdf_width, &quot;\\\\linewidth]{&quot;, pages, &quot;}} \\\\end{center}&quot;)) 5.8 Including another paper in your thesis - R Markdown child document Sometimes you want to include another paper you are currently writing as a chapter in your thesis. Above 5.7, we described the simplest way to do this: include the other paper as a pdf. However, in some cases you instead want to include the R Markdown source from this paper, and have it compiled within your thesis. This is a little bit more tricky, because you need to keep careful track of your file paths, but it is possible by including the paper as a child document. There are four main steps: Include the paper as a child document Make file paths compatible with knitting the article on its own, as well as when it’s include in your thesis Make header levels correct Make figure widths correct 5.8.1 An example paper in another folder Take this simple example (files for this are in this GitHub repository): |--paper_to_include | |--my_paper.Rmd | |--data | | |--cat_salt.csv | |--figures | | |--cat.jpg | |--thesis As the chart suggests, you have another folder, paper_to_include/ living in the same containing folder as your thesis folder. In the paper_to_include folder, the file my_paper.Rmd is where you write the paper. In my_paper.Rmd, you read in a CSV file found in the subfolder data/cats.csv, and also an image from the subfolder figures/cat.jpg. 5.8.2 Step 1: Include paper as a child document In your thesis folder, create an Rmd file for the chapter where you want to include another paper. Add one or more code chunks that include R Markdown files from that paper as child documents: # Including an external chapter ```{r child = &quot;../paper_to_include/my_paper.Rmd&quot;} ``` 5.8.3 Step 2: Make file paths compatible Use parameters to adjust the file path of images based on values you set in the YAML header of an R Markdown file. In my_paper.Rmd, create a parameter called other_path and set it to an empty string: --- title: &quot;A fabulous article in a different folder&quot; params: other_path: &quot;&quot; --- In my_paper.Rmd, put this at the start of the filepath when you read in data or include images: library(tidyverse) library(knitr) cat_data &lt;- read_csv(str_c(params$other_path, &quot;data/cats.csv&quot;)) include_graphics(str_c(params$other_path, &quot;figures/cat.jpg&quot;)) Finally, in your thesis folder’s index.Rmd file, also create the parameter other_path. But here, set it to where the paper_to_include/ folder is relative to your thesis folder: params: other_path: &quot;../paper_to_include/&quot; 5.8.3.1 Note on HTML output Note that if you want to host an HTML version on your thesis online, you will need to include graphics in the content that you host online - the internet obviously won’t be able to see filepaths that are just referring to stuff in another folder on your computer! 5.8.4 Step 3: Make sure header levels are correct Unless the paper you want to include is also written as a book, your header levels are probably going to be off. That is, the level 1 headers (# Some header) you use for main sections in the other paper turns into chaper titles when included in your thesis. To avoid this, first increment all heading levels by one in paper_to_include/my_paper.Rmd (# Some header -&gt; ## Some header). Then in paper_to_include/ create a lua filter that decrements header levels by one: Create a text file, save it as reduce_header_level.lua, and give it the content below. function Header(el) if (el.level &lt;= 1) then error(&quot;I don&#39;t know how to decrease the level of h1&quot;) end el.level = el.level - 1 return el end In the YAML header of paper_to_include/my_paper.Rmd, use this filter: --- title: &quot;A fabulous article in a different folder&quot; params: other_path: &quot;&quot; output: pdf_document: pandoc_args: [&quot;--lua-filter=reduce_header_level.lua&quot;] --- Now, your header levels will be correct both when you knit the paper on its own and when its included in your thesis. NOTE: There might be no need to use a lua filter to shift heading - it seems you could simply use pandoc_args: [\"--shift-heading-level-by=-1\"] (see https://pandoc.org/MANUAL.html#reader-options) 5.8.5 Step 4. Make sure figure widths are correct It might be that your figure widths when knitting your paper on its own, and when including it in your thesis, need to be different. You can again use parameters to set figure widths. Imagine you want figure width to be 80% of the page width when knitting your paper on its own, but 100% in your thesis. In paper_to_include/my_paper.Rmd, first add a parameter we could call out_width and set it to the string “80%”: --- title: &quot;A fabulous article in a different folder&quot; params: other_path: &quot;&quot; out_width: &quot;80%&quot; output: pdf_document: pandoc_args: [&quot;--lua-filter=reduce_header_level.lua&quot;] --- Then, make sure use that parameter to set the output width when you include figures in paper_to_include/my_paper.Rmd: ```{r, out.width=params$out_width, fig.cap=&quot;A very funny cat&quot;} include_graphics(str_c(params$other_path, &quot;figures/cat.jpg&quot;)) ``` Finally, create the parameter out_width in your thesis’ index.Rmd file: params: other_path: &quot;../paper_to_include/&quot; out_width: &quot;80%&quot; Now, the output width of your figure will be 80% when knitting your paper on its own, and 100% when knitting it as child document of your thesis. 5.9 Customizing referencing 5.9.1 Using a .csl file with pandoc instead of biblatex The oxforddown package uses biblatex in LaTeX for referencing. It is also possible to use pandoc for referencing by providing a .csl file in the YAML header of index.Rmd (likely requiring commenting out the biblatex code in templates/template.tex). This may be helpful for those who have a .csl file describing the referencing format for a particular journal. However, note that this approach does not support chapter bibliographies (see Section 5.9.2). csl: ecology.csl 5.9.2 Customizing biblatex and adding chapter bibliographies This section provides one example of customizing biblatex. Much of this code was combined from searches on Stack Exchange and other sources (e.g. here). In templates/template.tex, one can replace the existing biblatex calls with the following to achieve referencing that looks like this: (Charmantier and Gienapp 2014) Charmantier, A. and P. Gienapp (2014). Climate change and timing of avian breeding and migration: evolutionary versus plastic changes. Evolutionary Applications 7(1):15–28. doi: 10.1111/eva.12126. \\usepackage[backend=biber, bibencoding=utf8, refsection=chapter, % referencing by chapter style=authoryear, firstinits=true, isbn=false, doi=true, url=false, eprint=false, related=false, dashed=false, clearlang=true, maxcitenames=2, mincitenames=1, maxbibnames=10, abbreviate=false, minbibnames=3, uniquelist=minyear, sortcites=true, date=year ]{biblatex} \\AtEveryBibitem{% \\clearlist{language}% \\clearfield{note} } \\DeclareFieldFormat{titlecase}{\\MakeTitleCase{#1}} \\newrobustcmd{\\MakeTitleCase}[1]{% \\ifthenelse{\\ifcurrentfield{booktitle}\\OR\\ifcurrentfield{booksubtitle}% \\OR\\ifcurrentfield{maintitle}\\OR\\ifcurrentfield{mainsubtitle}% \\OR\\ifcurrentfield{journaltitle}\\OR\\ifcurrentfield{journalsubtitle}% \\OR\\ifcurrentfield{issuetitle}\\OR\\ifcurrentfield{issuesubtitle}% \\OR\\ifentrytype{book}\\OR\\ifentrytype{mvbook}\\OR\\ifentrytype{bookinbook}% \\OR\\ifentrytype{booklet}\\OR\\ifentrytype{suppbook}% \\OR\\ifentrytype{collection}\\OR\\ifentrytype{mvcollection}% \\OR\\ifentrytype{suppcollection}\\OR\\ifentrytype{manual}% \\OR\\ifentrytype{periodical}\\OR\\ifentrytype{suppperiodical}% \\OR\\ifentrytype{proceedings}\\OR\\ifentrytype{mvproceedings}% \\OR\\ifentrytype{reference}\\OR\\ifentrytype{mvreference}% \\OR\\ifentrytype{report}\\OR\\ifentrytype{thesis}} {#1} {\\MakeSentenceCase{#1}}} % \\renewbibmacro{in:}{} % suppress &quot;in&quot; for articles % \\renewbibmacro{in:}{% \\ifentrytype{article}{}{\\printtext{\\bibstring{in}\\intitlepunct}}} %-- no &quot;quotes&quot; around titles of chapters/article titles \\DeclareFieldFormat[article, inbook, incollection, inproceedings, misc, thesis, unpublished] {title}{#1} %-- no punctuation after volume \\DeclareFieldFormat[article] {volume}{{#1}} %-- puts number/issue between brackets \\DeclareFieldFormat[article, inbook, incollection, inproceedings, misc, thesis, unpublished] {number}{\\mkbibparens{#1}} %-- and then for articles directly the pages w/o any &quot;pages&quot; or &quot;pp.&quot; \\DeclareFieldFormat[article] {pages}{#1} %-- for some types replace &quot;pages&quot; by &quot;p.&quot; \\DeclareFieldFormat[inproceedings, incollection, inbook] {pages}{p. #1} %-- format 16(4):224--225 for articles \\renewbibmacro*{volume+number+eid}{ \\printfield{volume}% \\printfield{number}% \\printunit{\\addcolon} } If you would like chapter bibliographies, in addition insert the following code at the end of each chapter, and comment out the entire REFERENCES section at the end of template.tex. \\printbibliography[segment=\\therefsection,heading=subbibliography] 5.10 Customizing the page headers and footers (PDF) This can now be done directly in index.Rmd’s YAML header. If you are a LaTeX expert and need further customisation that what’s currently provided, you can tweak the relevant sections of templates/template.tex - the relevant code is beneath the line that begins \\usepackage{fancyhdr}. 5.11 Diving in to the OxThesis LaTeX template (PDF) For LaTeX minded people, you can read through templates/template.tex to see which additional customisation options are available as well as templates/ociamthesis.cls which supplies the base class. For example, template.tex provides an option for master’s degree submissions, which changes identifying information to candidate number and includes a word count. At the time of writing, you must set this directly in template.tex rather than from the YAML header in index.Rmd. 5.12 Customising to a different university 5.12.1 The minimal route If the front matter in the OxThesis LaTeX template is suitable to your university, customising oxforddown to your needs could be as simple as putting the name of your institution and the path to your university’s logo in index.Rmd: university: University of You university-logo: figures/your-logo-here.pdf 5.12.2 Replacing the entire title page with your required content If you have a .tex file with some required front matter from your university that you want to replace the OxThesis template’s title page altogether, you can provide a filepath to this file in index.Rmd. oxforddown’s sample content includes and example of this — if you use the YAML below, your front matter will look like this: alternative-title-page: front-and-back-matter/alt-title-page-example.tex References "],["troubleshooting.html", "6 Troubleshooting 6.1 Error: Failed to build the bibliography via biber", " 6 Troubleshooting This chapter describes common errors you may run into, and how to fix them. 6.1 Error: Failed to build the bibliography via biber This can happen if you’ve had a failed build, perhaps in relation to RStudio shutting down abruptly. Try doing this: type make clean-knits in the terminal tab (or run file.remove(list.files(pattern = \"*.(log|mtc|maf|aux|bbl|blg|xml)\")) in the R console) to clean up files generated by LaTeX during a build restart your computer If this does not solve the problem, try using the natbib LaTeX package instead of biblatex for handling references. To do this, go to index.Rmd and set use-biblatex: false and use-natbib: true set citation_package: natbib under output: bookdown::pdf_book: citation_package: natbib "],["conclusion.html", "Conclusion More info", " Conclusion If we don’t want Conclusion to have a chapter number next to it, we can add the {-} attribute. More info And here’s some other random info: the first paragraph after a chapter title or section head shouldn’t be indented, because indents are to tell the reader that you’re starting a new paragraph. Since that’s obvious after a chapter or section title, proper typesetting doesn’t add an indent there. This paragraph, by contrast, will be indented as it should because it is not the first one after the ‘More info’ heading. All hail LaTeX. (If you’re reading the HTML version, you won’t see any indentation - have a look at the PDF version to understand what in the earth this section is babbling on about). "],["the-first-appendix.html", "A The First Appendix", " A The First Appendix This first appendix includes an R chunk that was hidden in the document (using echo = FALSE) to help with readibility: In 02-rmd-basics-code.Rmd And here’s another one from the same chapter, i.e. Chapter ??: "],["the-second-appendix-for-fun.html", "B The Second Appendix, for Fun", " B The Second Appendix, for Fun "],["references.html", "References", " References "]]
